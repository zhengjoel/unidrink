<view class="container position-relative w-100 h-100 overflow-hidden data-v-f046345a"><view class="exchange-box data-v-f046345a"><view class="input-box data-v-f046345a"><input type="text" placeholder="请输入兑换码" placeholder-class="text-color-assist font-size-base" data-event-opts="{{[['input',[['__set_model',['','exchange_code','$event',[]]]]]]}}" value="{{exchange_code}}" bindinput="__e" class="data-v-f046345a"/><button type="primary" data-event-opts="{{[['tap',[['exchange',['$event']]]]]}}" bindtap="__e" class="data-v-f046345a">兑换</button></view></view><view class="tabbar data-v-f046345a"><block wx:for="{{tabs}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['handleTab',[index]]]]]}}" class="{{['tab data-v-f046345a',(activeTabIndex==index)?'active':'']}}" bindtap="__e"><view class="title data-v-f046345a">{{item.title}}</view></view></block></view><view class="flex-fill data-v-f046345a"><scroll-view class="coupon-list data-v-f046345a" scroll-y="{{true}}" data-event-opts="{{[['scrolltolower',[['getCoupons',['$0'],['activeTabIndex']]]]]}}" bindscrolltolower="__e"><block wx:for="{{tabs}}" wx:for-item="itemT" wx:for-index="indexT" wx:key="indexT"><block wx:if="{{indexT==activeTabIndex}}"><view class="wrapper data-v-f046345a"><block wx:for="{{itemT.coupons}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['openDetailModal',['$0',index],[[['tabs','',indexT],['coupons','',index]]]]]]]}}" class="coupon data-v-f046345a" bindtap="__e"><view class="taobao data-v-f046345a"><view class="ticket data-v-f046345a"><view class="left data-v-f046345a"><image class="picture data-v-f046345a" src="{{item.image}}" mode="aspectFill"></image><view class="introduce data-v-f046345a"><view class="top data-v-f046345a">￥<text class="big data-v-f046345a">{{item.value}}</text><view class="data-v-f046345a">{{'满'+item.least+"减"+item.value+''}}</view></view><view class="type data-v-f046345a">{{item.title}}</view><view class="date u-line-1 data-v-f046345a">{{item.starttime_text+"-"+item.endtime_text}}</view></view></view><block wx:if="{{activeTabIndex==2}}"><view class="right_log data-v-f046345a"><view class="data-v-f046345a">兑换时间</view><view style="font-size:22rpx;" class="data-v-f046345a">{{item.createtime_text}}</view></view></block><block wx:if="{{activeTabIndex==1}}"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="right data-v-f046345a" catchtap="__e"><view class="use immediate-use data-v-f046345a" round="{{true}}" data-event-opts="{{[['tap',[['receive',['$0',index],[[['tabs','',indexT],['coupons','',index]]]]]]]}}" bindtap="__e">立即领取</view></view></block><block wx:if="{{activeTabIndex==0}}"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="right data-v-f046345a" catchtap="__e"><block wx:if="{{item.status==0}}"><view class="use immediate-use data-v-f046345a" round="{{true}}" data-event-opts="{{[['tap',[['useCouponWith',['$0'],[[['tabs','',indexT],['coupons','',index]]]]]]]}}" bindtap="__e">立即使用</view></block><block wx:else><view class="used data-v-f046345a">已使用</view></block></view></block></view></view></view></block></view></block></block></scroll-view></view><modal vue-id="6375c024-1" custom="{{true}}" show="{{detailModalVisible}}" width="90%" data-event-opts="{{[['^cancel',[['closeDetailModal']]]]}}" bind:cancel="__e" class="data-v-f046345a" bind:__l="__l" vue-slots="{{['default']}}"><view class="modal-content data-v-f046345a"><view class="d-flex font-size-extra-lg text-color-base just-content-center mb-20 data-v-f046345a">{{coupon.title}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-f046345a">{{'有效期：'+coupon.starttime_text+"至"+coupon.endtime_text+''}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-f046345a">{{'领取时间：'+coupon.createtime_text+''}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-f046345a">{{'卷价值：满'+coupon.least+"减"+coupon.value+''}}</view><block wx:if="{{activeTabIndex==1}}"><view class="d-flex font-size-sm text-color-base mb-20 data-v-f046345a">{{'每人限领：'+coupon.limit+" 张 "+(coupon.my_receive>0?'(已领'+coupon.my_receive+'张)':'')+''}}</view></block><block wx:if="{{coupon.score>0}}"><view class="d-flex font-size-sm text-color-base mb-20 data-v-f046345a">{{'需要积分：'+coupon.score+''}}</view></block><view class="d-flex font-size-sm text-color-base mb-20 data-v-f046345a">{{'适用范围：'+$root.m0+''}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-f046345a">{{'适用店铺：'+coupon.shop_name+''}}</view><view class="pre-line font-size-sm text-color-assist mb-30 _pre data-v-f046345a" style="max-height:600rpx;overflow:auto;"><jyf-parser vue-id="{{('6375c024-2')+','+('6375c024-1')}}" data-ref="couponExplain" class="data-v-f046345a vue-ref" bind:__l="__l"></jyf-parser></view><block wx:if="{{activeTabIndex==0}}"><view class="d-flex align-items-center just-content-center data-v-f046345a"><button class="use-coupon-btn data-v-f046345a" type="primary" data-event-opts="{{[['tap',[['useCoupon',['$event']]]]]}}" bindtap="__e">立即使用</button></view></block><block wx:if="{{activeTabIndex==1}}"><view class="d-flex align-items-center just-content-center data-v-f046345a"><button class="use-coupon-btn data-v-f046345a" type="primary" data-event-opts="{{[['tap',[['receive',['$0','$1'],['coupon','couponIndex']]]]]}}" bindtap="__e">立即领取</button></view></block></view></modal><u-toast vue-id="6375c024-3" data-ref="uToast" class="data-v-f046345a vue-ref" bind:__l="__l"></u-toast></view>