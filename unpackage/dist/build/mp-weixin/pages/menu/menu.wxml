<block wx:if="{{!loading}}"><view class="container data-v-c2d59cfc"><block wx:if="{{goods.length}}"><view class="main data-v-c2d59cfc"><view class="nav data-v-c2d59cfc"><view class="header data-v-c2d59cfc"><block wx:if="{{orderType=='takein'}}"><view class="left data-v-c2d59cfc"><view data-event-opts="{{[['tap',[['selectShop']]]]}}" class="store-name data-v-c2d59cfc" bindtap="__e"><text class="data-v-c2d59cfc">{{store.name}}</text><view class="iconfont iconarrow-right data-v-c2d59cfc"></view></view><view class="store-location data-v-c2d59cfc"><image class="mr-10 data-v-c2d59cfc" style="width:30rpx;height:30rpx;" src="/static/images/order/location.png"></image><text data-event-opts="{{[['tap',[['init',['$event']]]]]}}" bindtap="__e" class="data-v-c2d59cfc">{{"距离您 "+store.far_text}}</text></view></view></block><block wx:else><view class="left overflow-hidden data-v-c2d59cfc"><view data-event-opts="{{[['tap',[['selectShop']]]]}}" class="store-name data-v-c2d59cfc" bindtap="__e"><view class="data-v-c2d59cfc">{{store.name+''}}<text class="small data-v-c2d59cfc">{{orderType=='takeout'?'(配送距离:'+store.distance+'km)':''}}</text></view><view class="iconfont iconarrow-right data-v-c2d59cfc"></view></view><view data-event-opts="{{[['tap',[['takout',[true]]]]]}}" class="store-location data-v-c2d59cfc" bindtap="__e"><image class="mr-10 data-v-c2d59cfc" style="width:30rpx;height:30rpx;" src="/static/images/order/location.png"></image><text class="data-v-c2d59cfc">{{address.address+" ,距离您 "+store.far_text}}</text></view></view></block><view class="right data-v-c2d59cfc"><view data-event-opts="{{[['tap',[['SET_ORDER_TYPE',['takein']]]]]}}" class="{{['dinein data-v-c2d59cfc',(orderType=='takein')?'active':'']}}" bindtap="__e"><text class="data-v-c2d59cfc">自取</text></view><view data-event-opts="{{[['tap',[['takout',['$event']]]]]}}" class="{{['takeout data-v-c2d59cfc',(orderType=='takeout')?'active':'']}}" bindtap="__e"><text class="data-v-c2d59cfc">外卖</text></view></view></view></view><block wx:if="{{store.notice}}"><view style="height:60rpx;" class="data-v-c2d59cfc"><uni-notice-bar style="margin-top:14rpx;" vue-id="9ad1f540-1" backgroundColor scrollable="true" single="true" text="{{store.notice}}" class="data-v-c2d59cfc" bind:__l="__l"></uni-notice-bar></view></block><view class="content data-v-c2d59cfc" style="{{'height:'+('calc(100vh - 200rpx + '+(store.notice?'0rpx':'60rpx')+')')+';'}}"><scroll-view class="menus data-v-c2d59cfc" scroll-into-view="{{menuScrollIntoView}}" scroll-with-animation="{{true}}" scroll-y="{{true}}"><view class="wrapper data-v-c2d59cfc"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['menu data-v-c2d59cfc',(item.$orig.id===currentCateId)?'current':'']}}" id="{{'menu-'+item.$orig.id}}" data-event-opts="{{[['tap',[['handleMenuTap',['$0'],[[['goods','',index,'id']]]]]]]}}" bindtap="__e"><text class="data-v-c2d59cfc">{{item.$orig.name}}</text><view hidden="{{!(item.m0)}}" class="dot data-v-c2d59cfc">{{item.m1}}</view></view></block></view></scroll-view><scroll-view class="goods data-v-c2d59cfc" scroll-with-animation="{{true}}" scroll-y="{{true}}" scroll-top="{{cateScrollTop}}" data-event-opts="{{[['scroll',[['handleGoodsScroll',['$event']]]]]}}" bindscroll="__e"><view class="wrapper data-v-c2d59cfc"><block wx:if="{{ads.length>0}}"><swiper class="ads data-v-c2d59cfc" id="ads" autoplay="{{true}}" interval="{{3000}}" indicator-dots="{{true}}"><block wx:for="{{ads}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="data-v-c2d59cfc"><image mode="aspectFill" src="{{item.image}}" class="data-v-c2d59cfc"></image></swiper-item></block></swiper></block><view class="list data-v-c2d59cfc"><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="category data-v-c2d59cfc" id="{{'cate-'+item.$orig.id}}"><view class="title data-v-c2d59cfc"><text class="data-v-c2d59cfc">{{item.$orig.name}}</text><image class="icon data-v-c2d59cfc" mode="aspectFill" src="{{item.$orig.icon}}"></image></view><view class="items data-v-c2d59cfc"><block wx:for="{{item.l1}}" wx:for-item="good" wx:for-index="key" wx:key="key"><view class="{{['good data-v-c2d59cfc',(good.$orig.stock<=0)?'backgroud-grey':'']}}"><image class="image data-v-c2d59cfc" mode="aspectFill" src="{{good.$orig.image}}" data-event-opts="{{[['tap',[['showGoodDetailModal',['$0','$1'],[[['goods','',index]],[['goods','',index],['goods_list','',key]]]]]]]}}" bindtap="__e"></image><view class="right data-v-c2d59cfc"><text class="name data-v-c2d59cfc">{{good.$orig.name}}</text><text class="tips data-v-c2d59cfc">{{good.$orig.desc}}</text><view class="price_and_action data-v-c2d59cfc"><text class="price data-v-c2d59cfc">{{"￥"+good.$orig.sales_price}}</text><block wx:if="{{good.$orig.use_spec&&good.$orig.stock>0}}"><view class="btn-group data-v-c2d59cfc"><button class="btn property_btn data-v-c2d59cfc" type="primary" hover-class="none" size="mini" data-event-opts="{{[['tap',[['showGoodDetailModal',['$0','$1'],[[['goods','',index]],[['goods','',index],['goods_list','',key]]]]]]]}}" bindtap="__e">选规格</button><view hidden="{{!(good.m2)}}" class="dot data-v-c2d59cfc">{{good.m3}}</view></view></block><block wx:if="{{!good.$orig.use_spec&&good.$orig.stock>0}}"><view class="btn-group data-v-c2d59cfc"><button hidden="{{!(good.m4)}}" class="btn reduce_btn data-v-c2d59cfc" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handleReduceFromCart',['$0','$1'],[[['goods','',index]],[['goods','',index],['goods_list','',key]]]]]]]}}" bindtap="__e"><view class="iconfont iconsami-select data-v-c2d59cfc"></view></button><view hidden="{{!(good.m5)}}" class="number data-v-c2d59cfc">{{good.m6}}</view><button class="btn add_btn data-v-c2d59cfc" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handleAddToCart',['$0','$1',1],[[['goods','',index]],[['goods','',index],['goods_list','',key]]]]]]]}}" bindtap="__e"><view class="iconfont iconadd-select data-v-c2d59cfc"></view></button></view></block><block wx:if="{{good.$orig.stock==0}}"><view class="data-v-c2d59cfc">已售罄</view></block></view></view></view></block></view></view></block></view></view></scroll-view></view><block wx:if="{{cart.length>0}}"><view class="cart-box data-v-c2d59cfc"><view class="mark data-v-c2d59cfc"><image class="cart-img data-v-c2d59cfc" src="/static/images/menu/cart.png" data-event-opts="{{[['tap',[['openCartPopup',['$event']]]]]}}" bindtap="__e"></image><view class="tag data-v-c2d59cfc">{{getCartGoodsNumber}}</view></view><view class="price data-v-c2d59cfc">{{"￥"+getCartGoodsPrice}}</view><button class="pay-btn data-v-c2d59cfc" type="primary" disabled="{{disabledPay}}" data-event-opts="{{[['tap',[['toPay',['$event']]]]]}}" bindtap="__e">{{''+(disabledPay?'差'+spread+'元起送':'去结算')+''}}</button></view></block></view></block><modal class="good-detail-modal data-v-c2d59cfc" vue-id="9ad1f540-2" show="{{goodDetailModalVisible}}" color="#5A5B5C" width="90%" custom="{{true}}" padding="0rpx" radius="12rpx" bind:__l="__l" vue-slots="{{['default']}}"><view class="cover data-v-c2d59cfc"><block wx:if="{{good.image}}"><image class="image data-v-c2d59cfc" src="{{good.image}}"></image></block><view class="btn-group data-v-c2d59cfc"><image src="/static/images/menu/close.png" data-event-opts="{{[['tap',[['closeGoodDetailModal',['$event']]]]]}}" bindtap="__e" class="data-v-c2d59cfc"></image></view></view><scroll-view class="detail data-v-c2d59cfc" scroll-y="{{true}}"><view class="wrapper data-v-c2d59cfc"><view class="basic data-v-c2d59cfc"><view class="name data-v-c2d59cfc">{{good.name}}</view><view class="tips data-v-c2d59cfc">{{good.desc}}</view></view><block wx:if="{{good.use_spec}}"><view class="properties data-v-c2d59cfc"><block wx:for="{{good.specList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="property data-v-c2d59cfc"><view class="title data-v-c2d59cfc"><text class="name data-v-c2d59cfc">{{item.name}}</text><block wx:if="{{item.desc}}"><view class="desc data-v-c2d59cfc">{{"("+item.desc+")"}}</view></block></view><view class="values data-v-c2d59cfc"><block wx:for="{{item.child}}" wx:for-item="value" wx:for-index="key" wx:key="key"><view data-event-opts="{{[['tap',[['changePropertyDefault',[index,key]]]]]}}" class="{{['value data-v-c2d59cfc',(item.default==value)?'default':'']}}" bindtap="__e">{{''+value+''}}</view></block></view></view></block></view></block></view></scroll-view><view class="action data-v-c2d59cfc"><view class="left data-v-c2d59cfc"><view class="price data-v-c2d59cfc">{{"￥"+good.sales_price}}</view><block wx:if="{{$root.m7}}"><view class="props data-v-c2d59cfc">{{''+$root.m8+''}}</view></block></view><view class="btn-group data-v-c2d59cfc"><text style="margin-right:20rpx;" class="data-v-c2d59cfc">{{"库存："+good.stock+''}}</text><button class="btn data-v-c2d59cfc" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handlePropertyReduce',['$event']]]]]}}" bindtap="__e"><view class="iconfont iconsami-select data-v-c2d59cfc"></view></button><view class="number data-v-c2d59cfc">{{good.number}}</view><button class="btn data-v-c2d59cfc" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handlePropertyAdd',['$event']]]]]}}" bindtap="__e"><view class="iconfont iconadd-select data-v-c2d59cfc"></view></button></view></view><view data-event-opts="{{[['tap',[['handleAddToCartInModal',['$event']]]]]}}" class="add-to-cart-btn data-v-c2d59cfc" bindtap="__e"><view class="data-v-c2d59cfc">加入购物车</view></view></modal><popup-layer class="cart-popup data-v-c2d59cfc" vue-id="9ad1f540-3" direction="top" show-pop="{{cartPopupVisible}}" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content" class="data-v-c2d59cfc"><view class="top data-v-c2d59cfc"><text data-event-opts="{{[['tap',[['handleCartClear',['$event']]]]]}}" bindtap="__e" class="data-v-c2d59cfc">清空</text></view><scroll-view class="cart-list data-v-c2d59cfc" scroll-y="{{true}}"><view class="wrapper data-v-c2d59cfc"><block wx:for="{{cart}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item data-v-c2d59cfc"><view class="left data-v-c2d59cfc"><view class="name data-v-c2d59cfc">{{item.name}}</view><view class="props data-v-c2d59cfc">{{item.props_text}}</view></view><view class="center data-v-c2d59cfc"><text class="data-v-c2d59cfc">{{"￥"+item.sales_price}}</text></view><view class="right data-v-c2d59cfc"><button class="btn data-v-c2d59cfc" type="default" plain="{{true}}" size="mini" hover-class="none" data-event-opts="{{[['tap',[['handleCartItemReduce',[index]]]]]}}" bindtap="__e"><view class="iconfont iconsami-select data-v-c2d59cfc"></view></button><view class="number data-v-c2d59cfc">{{item.number}}</view><button class="btn data-v-c2d59cfc" type="primary" size="min" hover-class="none" data-event-opts="{{[['tap',[['handleCartItemAdd',[index]]]]]}}" bindtap="__e"><view class="iconfont iconadd-select data-v-c2d59cfc"></view></button></view></view></block><block wx:if="{{orderType=='takeout'&&store.packing_fee}}"><view class="item data-v-c2d59cfc"><view class="left data-v-c2d59cfc"><view class="name data-v-c2d59cfc">包装费</view></view><view class="center data-v-c2d59cfc"><text class="data-v-c2d59cfc">{{"￥"+$root.m9}}</text></view><view class="right invisible data-v-c2d59cfc"><button class="btn data-v-c2d59cfc" type="default" plain="{{true}}" size="mini" hover-class="none"><view class="iconfont iconsami-select data-v-c2d59cfc"></view></button><view class="number data-v-c2d59cfc">1</view><button class="btn data-v-c2d59cfc" type="primary" size="min" hover-class="none"><view class="iconfont iconadd-select data-v-c2d59cfc"></view></button></view></view></block></view></scroll-view></view></popup-layer></view></block><block wx:else><view class="loading data-v-c2d59cfc"><our-loading vue-id="9ad1f540-4" active="{{true}}" background-color color="#00b1b7" text=" " class="data-v-c2d59cfc" bind:__l="__l"></our-loading><block wx:if="{{!store.id}}"><button style="z-index:3001;position:absolute;top:650rpx;" type="primary" data-event-opts="{{[['tap',[['init',['$event']]]]]}}" bindtap="__e" class="data-v-c2d59cfc">定位最近的门店</button></block></view></block>