{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhengmingwei/Desktop/Project/uni-app/uni-drink/pages/coupons/coupons.vue?2f9f","webpack:////Users/zhengmingwei/Desktop/Project/uni-app/uni-drink/pages/coupons/coupons.vue?529d","webpack:////Users/zhengmingwei/Desktop/Project/uni-app/uni-drink/pages/coupons/coupons.vue?c437","webpack:////Users/zhengmingwei/Desktop/Project/uni-app/uni-drink/pages/coupons/coupons.vue?6c0a","uni-app:///pages/coupons/coupons.vue","webpack:////Users/zhengmingwei/Desktop/Project/uni-app/uni-drink/pages/coupons/coupons.vue?f1e7","webpack:////Users/zhengmingwei/Desktop/Project/uni-app/uni-drink/pages/coupons/coupons.vue?cd6a"],"names":["createPage","Page"],"mappings":"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","file":"pages/coupons/coupons.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/coupons/coupons.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./coupons.vue?vue&type=template&id=0b776522&scoped=true&\"\nvar renderjs\nimport script from \"./coupons.vue?vue&type=script&lang=js&\"\nexport * from \"./coupons.vue?vue&type=script&lang=js&\"\nimport style0 from \"./coupons.vue?vue&type=style&index=0&id=0b776522&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b776522\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/coupons/coupons.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupons.vue?vue&type=template&id=0b776522&scoped=true&\"","var components = {\n  modal: function() {\n    return import(\n      /* webpackChunkName: \"components/modal/modal\" */ \"@/components/modal/modal.vue\"\n    )\n  },\n  jyfParser: function() {\n    return import(\n      /* webpackChunkName: \"components/jyf-parser/jyf-parser\" */ \"@/components/jyf-parser/jyf-parser.vue\"\n    )\n  },\n  uToast: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-toast/u-toast\" */ \"uview-ui/components/u-toast/u-toast.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.typeInfo(_vm.coupon.type)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupons.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container position-relative w-100 h-100 overflow-hidden\">\r\n\t\t<view class=\"exchange-box\">\r\n\t\t\t<view class=\"input-box\">\r\n\t\t\t\t<input type=\"text\" v-model=\"exchange_code\" placeholder=\"请输入兑换码\" placeholder-class=\"text-color-assist font-size-base\" />\r\n\t\t\t\t<button type=\"primary\" @click=\"exchange\">兑换</button>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view class=\"font-size-sm text-color-primary line-height-2\">查看兑换规则</view> -->\r\n\t\t</view>\r\n\t\t<view class=\"tabbar\">\r\n\t\t\t<view class=\"tab\" :class=\"{active: activeTabIndex == index}\" \r\n\t\t\t\tv-for=\"(item, index) in tabs\" :key=\"index\" @tap=\"handleTab(index)\">\r\n\t\t\t\t<view class=\"title\">{{ item.title }}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"flex-fill\">\r\n\t\t\t<scroll-view scroll-y class=\"coupon-list\" @scrolltolower=\"getCoupons(activeTabIndex)\">\r\n\t\t\t\t<view class=\"wrapper\" v-for=\"(itemT, indexT) in tabs\" :key=\"indexT\" v-if=\"indexT == activeTabIndex\">\r\n\t\t\t\t\t<view class=\"coupon\" v-for=\"(item, index) in itemT.coupons\" :key=\"index\" @tap=\"openDetailModal(item,index)\">\r\n\t\t\t\t\t\t<!-- <view class=\"d-flex align-items-center detail\">\r\n\t\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFill\" class=\"coupon-img\"></image>\r\n\t\t\t\t\t\t\t<view class=\"flex-fill d-flex flex-column just-content-center overflow-hidden\">\r\n\t\t\t\t\t\t\t\t<view class=\"font-size-lg text-color-base text-truncate mb-10\">{{ item.title }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"font-size-sm text-color-base\">有效期至{{ item.endtime_text }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"activeTabIndex != 1\" class=\"d-flex align-items-center justify-content-end\" style=\"height: 80rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"font-size-sm text-color-primary\">查看详情</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-else class=\"d-flex align-items-center\" style=\"height: 80rpx;position:relative\">\n\t\t\t\t\t\t\t<view class=\"font-size-sm text-color-primary\">查看详情</view>\n\t\t\t\t\t\t\t<view style=\"position:absolute;right:0\">\n\t\t\t\t\t\t\t\t<u-button\n\t\t\t\t\t\t\t\t:loading=\"false\"\n\t\t\t\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\t@click=\"receive(item, index)\"\n\t\t\t\t\t\t\t\t>立即领取</u-button>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view> -->\n\t\t\t\t\t\t\n\t\t\t\t\t\t<view class=\"taobao\">\n\t\t\t\t\t\t\t<view class=\"ticket\">\n\t\t\t\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t\t\t\t<image\n\t\t\t\t\t\t\t\t\t\tclass=\"picture\"\n\t\t\t\t\t\t\t\t\t\t:src=\"item.image\"\n\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\t\t\t\t\t></image>\n\t\t\t\t\t\t\t\t\t<view class=\"introduce\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"top\">\n\t\t\t\t\t\t\t\t\t\t\t￥\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"big\">{{item.value}}</text>\n\t\t\t\t\t\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t\t\t\t\t\t满{{item.least}}减{{item.value}}\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"type\">{{ item.title }}</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"date u-line-1\">{{item.starttime_text}}-{{item.endtime_text}}</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"right_log\" v-if=\"activeTabIndex == 2\">\n\t\t\t\t\t\t\t\t\t<view>兑换时间</view>\n\t\t\t\t\t\t\t\t\t<view style=\"font-size: 22rpx;\">{{item.createtime_text}}</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"right\" @click.stop=\"\" v-if=\"activeTabIndex == 1\">\n\t\t\t\t\t\t\t\t\t<view class=\"use immediate-use\" :round=\"true\" @tap=\"receive(item, index)\" >立即领取</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"right\" @click.stop=\"\" v-if=\"activeTabIndex == 0\">\n\t\t\t\t\t\t\t\t\t<view v-if=\"item.status == 0\" class=\"use immediate-use\" :round=\"true\" @tap=\"useCouponWith(item)\" >立即使用</view>\n\t\t\t\t\t\t\t\t\t<view v-else class=\"used\">已使用</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\n\t\t\t\t<!-- <u-loadmore :status=\"'nomore'\" icon-type=\"iconType\" /> -->\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<!-- <view class=\"bottom-box d-flex align-items-center just-content-center font-size-sm text-color-primary\">\r\n\t\t\t<view class=\"item\">已过期的</view>\n\t\t\t<view class=\"item\">兑换记录</view>\r\n\t\t\t<view class=\"item\" @tap=\"showTip1\">赠送记录</view>\r\n\t\t\t<view class=\"item\" @tap=\"showTip2\">第三方权益</view>\r\n\t\t</view> -->\r\n\t\t<modal custom :show=\"detailModalVisible\" @cancel=\"closeDetailModal\" width=\"90%\">\r\n\t\t\t<view class=\"modal-content\">\r\n\t\t\t\t<view class=\"d-flex font-size-extra-lg text-color-base just-content-center mb-20\">{{ coupon.title }}</view>\r\n\t\t\t\t<view class=\"d-flex font-size-sm text-color-base mb-20\">\r\n\t\t\t\t\t有效期：{{ coupon.starttime_text }}至{{ coupon.endtime_text }}\r\n\t\t\t\t</view>\n\t\t\t\t<view class=\"d-flex font-size-sm text-color-base mb-20\">\n\t\t\t\t\t领取时间：{{ coupon.createtime_text }}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"d-flex font-size-sm text-color-base mb-20\">\n\t\t\t\t\t卷价值：满{{ coupon.least }}减{{ coupon.value }}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"d-flex font-size-sm text-color-base mb-20\" v-if=\"activeTabIndex == 1\">\n\t\t\t\t\t每人限领：{{ coupon.limit }} 张 {{ coupon.my_receive > 0 ? '(已领'+coupon.my_receive+'张)':''}}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"d-flex font-size-sm text-color-base mb-20\" v-if=\"coupon.score > 0\">\n\t\t\t\t\t需要积分：{{ coupon.score }} \n\t\t\t\t</view>\n\t\t\t\t<view class=\"d-flex font-size-sm text-color-base mb-20\">\n\t\t\t\t\t适用范围：{{typeInfo(coupon.type)}}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"d-flex font-size-sm text-color-base mb-20\">\n\t\t\t\t\t适用店铺：{{coupon.shop_name}}\n\t\t\t\t</view>\r\n\t\t\t\t<pre class=\"pre-line font-size-sm text-color-assist mb-30\" style=\"max-height: 600rpx;overflow: auto;\">\r\n\t\t\t\t\t<jyf-parser ref=\"couponExplain\"></jyf-parser>\r\n\t\t\t\t</pre>\r\n\t\t\t\t<view class=\"d-flex align-items-center just-content-center\" v-if=\"activeTabIndex == 0\">\r\n\t\t\t\t\t<button type=\"primary\" @tap=\"useCoupon\" class=\"use-coupon-btn\">立即使用</button>\r\n\t\t\t\t</view>\n\t\t\t\t<view class=\"d-flex align-items-center just-content-center\" v-if=\"activeTabIndex == 1\">\n\t\t\t\t\t<button type=\"primary\" @tap=\"receive(coupon, couponIndex)\" class=\"use-coupon-btn\">立即领取</button>\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</modal>\n\t\t\n\t\t<!--轻提示-->\n\t\t<u-toast ref=\"uToast\"></u-toast>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport modal from '@/components/modal/modal'\r\nimport jyfParser from \"@/components/jyf-parser/jyf-parser\"\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tmodal,\r\n\t\tjyfParser\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttabs: [\n\t\t\t\t{title: '我的优惠券', page:1, pagesize:10,\n\t\t\t\t\tcoupons: []\n\t\t\t\t},\r\n\t\t\t\t{title: '未领优惠券', page:1, pagesize:10,\n\t\t\t\t\tcoupons: []\n\t\t\t\t},\r\n\t\t\t\t{title: '兑换记录', page:1, pagesize:10,\n\t\t\t\t\tcoupons: []\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tactiveTabIndex: '',\r\n\t\t\tdetailModalVisible: false,\r\n\t\t\tcoupon: {},\n\t\t\tcouponIndex: 0, //当前选中的第几行\n\t\t\texchange_code: '' \r\n\t\t}\r\n\t},\r\n\tonShow() {\r\n\t\tthis.activeTabIndex = 0\r\n\t},\n\tonLoad() {\n\t\t\n\t},\n\tonPullDownRefresh() {\n\t\tthis.tabs[this.activeTabIndex].coupons = [];\n\t\tthis.tabs[this.activeTabIndex].page = 1;\n\t\tthis.getCoupons(this.activeTabIndex)\n\t},\r\n\twatch: {\r\n\t\tactiveTabIndex: async function() {\r\n\t\t\tawait this.getCoupons(this.activeTabIndex)\r\n\t\t}\r\n\t},\r\n\tmethods: {\n\t\t// 兑换\n\t\tasync exchange() {\n\t\t\tlet data = await this.$api.request('/coupon/receive', 'POST', {code:this.exchange_code});\n\t\t\tif (data) {\n\t\t\t\tthis.$refs.uToast.show({\n\t\t\t\t\ttitle: '兑换成功',\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\tthis.tabs[0].coupons = [];\n\t\t\t\tthis.tabs[0].page = 1;\n\t\t\t\tthis.getCoupons(0)\n\t\t\t\tthis.tabs[1].coupons = [];\n\t\t\t\tthis.tabs[1].page = 1;\n\t\t\t\tthis.getCoupons(1)\n\t\t\t}\n\t\t},\n\t\t// 使用范围\n\t\ttypeInfo(type) {\n\t\t\tif (type == 0) {\n\t\t\t\treturn '外卖和自取'\n\t\t\t}\n\t\t\tif (type == 1) {\n\t\t\t\treturn '自取'\n\t\t\t}\n\t\t\tif (type == 2) {\n\t\t\t\treturn '外卖'\n\t\t\t}\n\t\t},\r\n\t\thandleTab(index) {\r\n\t\t\tthis.activeTabIndex = index\r\n\t\t},\r\n\t\tasync getCoupons(type) {\r\n\t\t\t// const coupons = await this.$api('customerCoupons')\r\n\t\t\t// if(type == 'all') {\r\n\t\t\t// \tthis.coupons = coupons\r\n\t\t\t// } else {\r\n\t\t\t// \tthis.coupons = coupons.filter(item => item.couponType == type)\r\n\t\t\t// }\n\t\t\t\n\t\t\tlet page = this.tabs[type].page;\n\t\t\tlet pagesize = this.tabs[type].pagesize;\n\t\t\t// 我的优惠券\n\t\t\tlet data = false;\n\t\t\tif (type == '0') {\n\t\t\t\tdata = await this.$api.request('/coupon/mine','POST',{page:page,pagesize:pagesize});\n\t\t\t}\n\t\t\t// 未领优惠券\n\t\t\tif (type == '1') {\n\t\t\t\tdata = await this.$api.request('/coupon/index','POST',{page:page,pagesize:pagesize});\n\t\t\t}\n\t\t\t// 兑换记录\n\t\t\tif (type == '2') {\n\t\t\t\tdata = await this.$api.request('/coupon/exchangeLog', 'POST', {page:page,pagesize:pagesize});\n\t\t\t}\n\t\t\tuni.stopPullDownRefresh();\n\t\t\tif (!data || data.length == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (page == 1) {\n\t\t\t\tthis.tabs[type].coupons = data;\n\t\t\t} else {\n\t\t\t\tfor(let i in data) {\n\t\t\t\t\tthis.tabs[type].coupons.push(data[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tabs[type].page++;\n\t\t},\r\n\t\topenDetailModal(coupon,index) {\n\t\t\tthis.couponIndex = index;\r\n\t\t\tthis.coupon = coupon\r\n\t\t\tthis.$refs['couponExplain'].setContent(this.coupon.instructions || '')\r\n\t\t\tthis.detailModalVisible = true\r\n\t\t},\n\t\tuseCouponWith(coupon) {\n\t\t\tthis.coupon = coupon\n\t\t\tthis.useCoupon();\n\t\t},\r\n\t\tcloseDetailModal() {\r\n\t\t\tthis.detailModalVisible = false\r\n\t\t\tthis.coupon = {}\r\n\t\t},\r\n\t\tuseCoupon() {\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: '/pages/menu/menu'\r\n\t\t\t})\r\n\t\t},\r\n\t\tshowTip1() {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '您暂时还没有赠送中卡券哦~',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t},\r\n\t\tshowTip2() {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '您暂时还没有券码哦~',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t},\n\t\t// 领取优惠券\n\t\tasync receive(coupon,index) {\n\t\t\tlet data = await this.$api.request('/coupon/receive','POST',{id:coupon.id});\n\t\t\tif (data) {\n\t\t\t\tthis.$refs.uToast.show({\n\t\t\t\t\ttitle: '领取成功',\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\tlet coupon = this.tabs[this.activeTabIndex].coupons[index];\n\t\t\t\t// 我领取加一\n\t\t\t\tcoupon.my_receive++;\n\t\t\t\tif (coupon.limit == coupon.my_receive) {\n\t\t\t\t\tthis.tabs[this.activeTabIndex].coupons.splice(index,1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n/* #ifdef H5 */\r\npage {\r\n\theight: 100%;\r\n}\r\n/* #endif */\r\n\r\n.container {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n\r\n.exchange-box {\r\n\tflex-shrink: 0;\r\n\theight: 200rpx;\r\n\tbackground-color: #ffffff;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\r\n\t.input-box {\r\n\t\tdisplay: flex;\r\n\t\talign-items: stretch;\r\n\t\twidth: 70%;\r\n\t\tflex-shrink: 0;\r\n\t\tinput {\r\n\t\t\tflex: 1;\r\n\t\t\theight: 80rpx;\r\n\t\t\tborder: 1rpx solid #eee;\r\n\t\t\tborder-right: 0;\r\n\t\t\tborder-radius: 8rpx 0 0 8rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tfont-size: $font-size-base;\r\n\t\t\tcolor: $text-color-base;\r\n\t\t}\r\n\t\tbutton {\r\n\t\t\tborder-radius: 0 8rpx 8rpx 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.tabbar {\r\n\tflex-shrink: 0;\r\n\twidth: 100%;\r\n\theight: 120rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\t\r\n\t.tab {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-size: $font-size-base;\r\n\t\tcolor: $text-color-base;\r\n\t\tposition: relative;\r\n\t\t\r\n\t\t.title {\r\n\t\t\tpadding: 15rpx 0;\r\n\t\t}\r\n\t\t\r\n\t\t&.active {\r\n\t\t\tcolor: $color-primary;\r\n\t\t\t\r\n\t\t\t.title {\r\n\t\t\t\tborder-bottom: 5rpx solid $color-primary;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.bottom-box {\r\n\theight: 80rpx;\r\n\tflex-shrink: 0;\r\n\t.item {\r\n\t\tpadding: 0 20rpx;\r\n\t\tposition: relative;\r\n\t\t\r\n\t\t&::after {\r\n\t\t\tcontent: \" \";\r\n\t\t\tborder-right: 1rpx solid $text-color-assist;\r\n\t\t\theight: 100%;\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0;\r\n\t\t\ttop: 0;\r\n\t\t\ttransform: scaleX(0.5) scaleY(0.8);\r\n\t\t}\r\n\t\t\r\n\t\t&:nth-last-child(1)::after {\r\n\t\t\tborder-right: 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.coupon-list {\r\n\theight: calc(100vh - 120rpx - 200rpx);\r\n\t/* #ifdef H5 */\r\n\theight: calc(100vh - 120rpx - 200rpx - 44px);\r\n\t/* #endif */\r\n}\r\n\r\n.wrapper {\r\n\tpadding: 0 20rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\t\r\n\t.coupon {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\t//padding: 0 30rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\tbox-shadow: 0 10rpx 10rpx -10rpx rgba(15, 15, 15, 0.1);\r\n\t\tposition: relative;\r\n\t\t\r\n\t\t&::before {\r\n\t\t\tcontent: \"\";\r\n\t\t\tposition: absolute;\r\n\t\t\tbackground-color: $bg-color;\r\n\t\t\twidth: 30rpx;\r\n\t\t\theight: 30rpx;\r\n\t\t\tbottom: 65rpx;\r\n\t\t\tleft: -15rpx;\r\n\t\t\tborder-radius: 100%;\r\n\t\t}\r\n\t\t\r\n\t\t&::after {\r\n\t\t\tcontent: \"\";\r\n\t\t\tposition: absolute;\r\n\t\t\tbackground-color: $bg-color;\r\n\t\t\twidth: 30rpx;\r\n\t\t\theight: 30rpx;\r\n\t\t\tbottom: 65rpx;\r\n\t\t\tright: -15rpx;\r\n\t\t\tborder-radius: 100%;\r\n\t\t}\r\n\t\t\r\n\t\t.detail {\r\n\t\t\tpadding: 20rpx 0;\r\n\t\t\tposition: relative;\r\n\r\n\t\t    &::after {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tright: 0;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\tborder-bottom: 1rpx dashed #c6c6c6;\r\n\t\t\t\ttransform: scaleY(0.5);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.coupon-img {\r\n\t\t\t\twidth: 150rpx;\r\n\t\t\t\theight: 150rpx;\r\n\t\t\t\tmargin-right: 40rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.use-coupon-btn {\r\n\twidth: 95%;\r\n\tborder-radius: 50rem !important;\r\n}\n\n\r\n.taobao {\r\n\tbackground-color: white;\r\n\t.title {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\t.left {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\t.store {\r\n\t\t\tfont-weight: 500;\r\n\t\t}\r\n\t\t.buddha {\r\n\t\t\twidth: 70rpx;\r\n\t\t\theight: 70rpx;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tmargin-right: 10rpx;\r\n\t\t}\r\n\t\t.entrance {\r\n\t\t\tcolor: $u-type-info;\r\n\t\t\tborder: solid 2rpx $u-type-info;\r\n\t\t\tline-height: 48rpx;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\tbackground: none;\r\n\t\t\tborder-radius: 15px;\r\n\t\t}\r\n\t}\r\n\t.ticket {\r\n\t\tdisplay: flex;\r\n\t\t.left {\r\n\t\t\twidth: 70%;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbackground-color: white;//rgb(255, 245, 244);\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tborder-right: dashed 2rpx rgb(224, 215, 211);\r\n\t\t\tdisplay: flex;\r\n\t\t\t.picture {\r\n\t\t\t\t//width: 172rpx;\r\n\t\t\t\tborder-radius: 20rpx;\n\t\t\t\twidth: 190rpx;\n\t\t\t\theight: 190rpx;\r\n\t\t\t}\r\n\t\t\t.introduce {\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\t.top{\r\n\t\t\t\t\tcolor:$u-type-warning;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t.big{\r\n\t\t\t\t\t\tfont-size: 60rpx;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.type{\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: $u-type-info-dark;\r\n\t\t\t\t}\r\n\t\t\t\t.date{\r\n\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\tcolor: $u-type-info-dark;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.right {\r\n\t\t\twidth: 30%;\r\n\t\t\tpadding: 40rpx 20rpx;\r\n\t\t\tbackground-color: white;//rgb(255, 245, 244);\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\t.use {\r\n\t\t\t\theight: auto;\r\n\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\tcolor: #ffffff!important;\r\n\t\t\t\tbackground-color: $u-type-warning!important;\r\n\t\t\t\tline-height: 40rpx;\r\n\t\t\t\tcolor: rgb(117, 142, 165);\r\n\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t}\n\t\t\t.used {\n\t\t\t\theight: auto;\n\t\t\t\tpadding: 0 20rpx;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tborder-radius: 40rpx;\n\t\t\t\t//color: #ffffff!important;\n\t\t\t\t//background-color: $u-type-warning!important;\n\t\t\t\tline-height: 40rpx;\n\t\t\t\t//color: rgb(117, 142, 165);\n\t\t\t\tmargin-left: 20rpx;\n\t\t\t}\r\n\t\t}\n\t\t.right_log {\n\t\t\ttext-align: center;\n\t\t\twidth: 30%;\n\t\t\tpadding: 80rpx 0rpx;\n\t\t\tbackground-color: white;//rgb(255, 245, 244);\n\t\t\tborder-radius: 20rpx;\n\t\t\t\n\t\t\talign-items: center;\n\t\t\t\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupons.vue?vue&type=style&index=0&id=0b776522&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupons.vue?vue&type=style&index=0&id=0b776522&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1599487985701\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}