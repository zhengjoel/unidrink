<view class="container position-relative data-v-1ddce136"><view style="margin-bottom:130rpx;" class="data-v-1ddce136"><view class="section-1 data-v-1ddce136"><block wx:if="{{store.distance>0}}"><list-cell class="location data-v-1ddce136" vue-id="c48072e0-1" bind:__l="__l" vue-slots="{{['default']}}"><view class="flex-fill d-flex justify-content-between align-items-center data-v-1ddce136"><view class="store-name flex-fill data-v-1ddce136">{{orderType=='takeout'?'外卖配送':'点餐自取'}}</view><u-switch vue-id="{{('c48072e0-2')+','+('c48072e0-1')}}" active-color="#00b1b7" value="{{orderType=='takeout'}}" data-event-opts="{{[['^change',[['takout']]]]}}" bind:change="__e" class="data-v-1ddce136" bind:__l="__l"></u-switch></view></list-cell></block><block wx:if="{{orderType=='takeout'}}"><list-cell bind:click="__e" vue-id="c48072e0-3" data-event-opts="{{[['^click',[['chooseAddress']]]]}}" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{address.name}}"><view class="w-100 d-flex flex-column data-v-1ddce136"><view class="d-flex align-items-center justify-content-between mb-10 data-v-1ddce136"><view class="font-size-lg text-color-base data-v-1ddce136">{{address.address+' '+address.door_number}}</view><image class="arrow data-v-1ddce136" src="/static/images/navigator-1.png"></image></view><view class="d-flex text-color-assist font-size-sm align-items-center data-v-1ddce136"><view class="mr-10 data-v-1ddce136">{{address.name}}</view><view class="mr-10 data-v-1ddce136">{{!address.sex?'先生':'女士'}}</view><view class="data-v-1ddce136">{{address.mobile}}</view></view></view></block><block wx:else><view class="flex-fill d-flex justify-content-between align-items-center data-v-1ddce136"><view class="store-name flex-fill data-v-1ddce136">选择收货地址</view><image class="arrow data-v-1ddce136" src="/static/images/navigator-1.png"></image></view></block></list-cell></block></view><view class="section-1 data-v-1ddce136"><list-cell class="location data-v-1ddce136" bind:click="__e" vue-id="c48072e0-4" data-event-opts="{{[['^click',[['goToShop']]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="flex-fill d-flex justify-content-between align-items-center data-v-1ddce136"><view class="store-name flex-fill data-v-1ddce136">{{store.name}}</view><image class="arrow data-v-1ddce136" src="/static/images/navigator-1.png"></image></view></list-cell><block wx:if="{{orderType=='takein'}}"><list-cell class="meal-time data-v-1ddce136" vue-id="c48072e0-5" arrow="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="flex-fill d-flex justify-content-between align-items-center data-v-1ddce136" bindtap="__e"><view class="title data-v-1ddce136">取餐时间</view><view class="time data-v-1ddce136">{{''+takeinRange[defaultSelector[0]].name+''}}<u-picker vue-id="{{('c48072e0-6')+','+('c48072e0-5')}}" range="{{takeinRange}}" range-key="name" mode="selector" default-selector="{{defaultSelector}}" value="{{takeinTIme}}" data-event-opts="{{[['^cancel',[['takeinCancelTime']]],['^confirm',[['takeinConfirmTime']]],['^input',[['__set_model',['','takeinTIme','$event',[]]]]]]}}" bind:cancel="__e" bind:confirm="__e" bind:input="__e" class="data-v-1ddce136" bind:__l="__l"></u-picker></view></view></list-cell></block><block wx:if="{{orderType=='takein'}}"><list-cell class="contact data-v-1ddce136" vue-id="c48072e0-7" last="{{true}}" hover="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="flex-fill d-flex justify-content-between align-items-center data-v-1ddce136"><view class="title flex-fill data-v-1ddce136">联系电话</view><view class="time data-v-1ddce136"><input class="text-right data-v-1ddce136" placeholder="请输入手机号码" value="{{member.mobile}}"/></view><button class="contact-tip font-size-sm data-v-1ddce136">自动填写</button></view></list-cell></block><block wx:if="{{orderType=='takeout'}}"><list-cell vue-id="c48072e0-8" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="w-100 d-flex flex-column data-v-1ddce136"><view class="d-flex align-items-center font-size-base text-color-base data-v-1ddce136"><view class="flex-fill data-v-1ddce136">预计送达时间</view><view class="mr-10 data-v-1ddce136">{{''+defaultTime+''}}<u-picker vue-id="{{('c48072e0-9')+','+('c48072e0-8')}}" default-time="{{defaultTime}}" params="{{paramsTime}}" mode="time" value="{{takeoutTIme}}" data-event-opts="{{[['^cancel',[['cancelTime']]],['^confirm',[['choiceTime']]],['^input',[['__set_model',['','takeoutTIme','$event',[]]]]]]}}" bind:cancel="__e" bind:confirm="__e" bind:input="__e" class="data-v-1ddce136" bind:__l="__l"></u-picker></view></view><view class="font-size-base text-color-primary data-v-1ddce136">特殊时期减少接触，请修改下方订单备注</view></view></list-cell></block></view><view class="section-2 data-v-1ddce136"><view class="cart d-flex flex-column data-v-1ddce136"><block wx:for="{{cart}}" wx:for-item="item" wx:for-index="index" wx:key="index"><list-cell vue-id="{{'c48072e0-10-'+index}}" last="{{true}}" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="w-100 d-flex flex-column data-v-1ddce136"><view class="d-flex align-items-center mb-10 data-v-1ddce136"><view class="d-flex flex-fill justify-content-between align-items-center text-color-base font-size-lg data-v-1ddce136"><image style="width:80rpx;height:80rpx;" mode="aspectFill" src="{{item.image}}" class="data-v-1ddce136"></image></view><view class="name-and-props overflow-hidden data-v-1ddce136"><view class="text-color-base font-size-lg data-v-1ddce136">{{item.name}}</view></view><view class="d-flex flex-fill justify-content-between align-items-center text-color-base font-size-lg data-v-1ddce136"><view class="data-v-1ddce136">{{"x"+item.number}}</view><view class="data-v-1ddce136">{{"￥"+item.sales_price}}</view></view></view><view class="text-truncate font-size-base text-color-assist data-v-1ddce136">{{item.props_text}}</view></view></list-cell></block><block wx:if="{{orderType=='takeout'}}"><block wx:if="{{store.packing_fee>0}}"><list-cell vue-id="c48072e0-11" last="{{true}}" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="w-100 d-flex font-size-base align-items-center justify-content-between data-v-1ddce136"><view class="data-v-1ddce136">包装费</view><view class="data-v-1ddce136">{{"￥"+$root.m0}}</view></view></list-cell></block><block wx:if="{{store.delivery_cost>0}}"><list-cell vue-id="c48072e0-12" last="{{true}}" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="w-100 d-flex font-size-base align-items-center justify-content-between data-v-1ddce136"><view class="data-v-1ddce136">配送费</view><view class="data-v-1ddce136">{{"￥"+$root.m1}}</view></view></list-cell></block></block></view><list-cell vue-id="c48072e0-13" arrow="{{true}}" data-event-opts="{{[['^click',[['goToPackages']]]]}}" bind:click="__e" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="flex-fill d-flex justify-content-between align-items-center data-v-1ddce136"><view class="text-color-base data-v-1ddce136">优惠券</view><block wx:if="{{coupons.length==0}}"><view class="text-color-base data-v-1ddce136">暂无可用</view></block><block wx:else><block wx:if="{{coupon.title}}"><view class="text-color-danger data-v-1ddce136">{{coupon.title+"(满"+coupon.least+"减"+coupon.value+")"}}</view></block><block wx:else><view class="text-color-primary data-v-1ddce136">{{"可用优惠券"+coupons.length+"张"}}</view></block></block></view></list-cell><list-cell vue-id="c48072e0-14" last="{{true}}" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="flex-fill d-flex justify-content-end align-items-center data-v-1ddce136"><view class="data-v-1ddce136">{{'总计￥'+total+''}}<block wx:if="{{orderType=='takeout'}}"><text class="data-v-1ddce136">{{",配送费￥"+store.delivery_price}}</text></block><block wx:if="{{coupon.value}}"><text class="data-v-1ddce136">{{",￥-"+coupon.value}}</text></block>,实付</view><view class="font-size-extra-lg font-weight-bold data-v-1ddce136">{{"￥"+amount}}</view></view></list-cell></view><view class="d-flex align-items-center justify-content-start font-size-sm text-color-warning data-v-1ddce136" style="padding:20rpx 0;"></view><view class="payment data-v-1ddce136"><list-cell vue-id="c48072e0-15" last="{{true}}" hover="{{false}}" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><text class="data-v-1ddce136">支付方式</text></list-cell><list-cell vue-id="c48072e0-16" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view data-event-opts="{{[['tap',[['setPayType',[5]]]]]}}" class="d-flex align-items-center justify-content-between w-100 disabled data-v-1ddce136" bindtap="__e"><view class="iconfont iconbalance line-height-100 payment-icon data-v-1ddce136"></view><view class="flex-fill data-v-1ddce136">{{"余额支付（余额￥"+member.money+"）"}}</view><block wx:if="{{member.money==0}}"><view class="font-size-sm data-v-1ddce136">余额不足</view></block><block wx:if="{{payType==5}}"><view class="iconfont line-height-100 checkbox checked iconradio-button-on data-v-1ddce136"></view></block><block wx:else><view class="iconfont line-height-100 checkbox iconradio-button-off data-v-1ddce136"></view></block></view></list-cell><list-cell vue-id="c48072e0-17" last="{{true}}" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view data-event-opts="{{[['tap',[['setPayType',[3]]]]]}}" class="d-flex align-items-center justify-content-between w-100 data-v-1ddce136" bindtap="__e"><view class="iconfont iconwxpay line-height-100 payment-icon data-v-1ddce136" style="color:#7EB73A;"></view><view class="flex-fill data-v-1ddce136">微信支付</view><block wx:if="{{payType==3}}"><view class="iconfont line-height-100 checkbox checked iconradio-button-on data-v-1ddce136"></view></block><block wx:else><view class="iconfont line-height-100 checkbox iconradio-button-off data-v-1ddce136"></view></block></view></list-cell></view><list-cell vue-id="c48072e0-18" arrow="{{true}}" last="{{true}}" data-event-opts="{{[['^click',[['goToRemark']]]]}}" bind:click="__e" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="d-flex flex-fill align-items-center justify-content-between overflow-hidden data-v-1ddce136"><view class="flex-shrink-0 mr-20 data-v-1ddce136">备注</view><view class="text-color-primary flex-fill text-truncate text-right data-v-1ddce136">{{form.remark||'点击填写备注'}}</view></view></list-cell></view><view class="w-100 pay-box position-fixed fixed-bottom d-flex align-items-center justify-content-between bg-white data-v-1ddce136" style="z-index:1;"><view class="font-size-sm data-v-1ddce136" style="margin-left:20rpx;">合计：</view><view class="font-size-lg flex-fill data-v-1ddce136">{{"￥"+amount}}</view><view data-event-opts="{{[['tap',[['submit',['$event']]]]]}}" class="bg-primary h-100 d-flex align-items-center just-content-center text-color-white font-size-base data-v-1ddce136" style="padding:0 60rpx;" bindtap="__e">付款</view></view><modal vue-id="c48072e0-19" show="{{ensureAddressModalVisible}}" custom="{{true}}" mask-closable="{{false}}" radius="{{0}}" width="90%" class="data-v-1ddce136" bind:__l="__l" vue-slots="{{['default']}}"><view class="modal-content data-v-1ddce136"><view class="d-flex justify-content-end data-v-1ddce136"><image style="width:40rpx;height:40rpx;" src="/static/images/pay/close.png" data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" bindtap="__e" class="data-v-1ddce136"></image></view><view class="d-flex just-content-center align-items-center data-v-1ddce136" style="margin-bottom:40px;"><view class="font-size-extra-lg text-color-base data-v-1ddce136">请再次确认下单地址</view></view><view class="d-flex font-size-base text-color-base font-weight-bold align-items-center justify-content-between mb-20 data-v-1ddce136"><view class="data-v-1ddce136">{{address.name+" "+(address.sex?'女士':'先生')}}</view><view class="data-v-1ddce136">{{address.mobile}}</view></view><view class="d-flex font-size-sm text-color-assist align-items-center justify-content-between mb-40 data-v-1ddce136"><view style="max-width:60%;" class="data-v-1ddce136">{{address.address+address.door_number}}</view><button class="change-address-btn data-v-1ddce136" style="white-space:nowrap;" type="primary" size="mini" plain="{{true}}" data-event-opts="{{[['tap',[['chooseAddress',['$event']]]]]}}" bindtap="__e">修改地址</button></view><button class="pay_btn data-v-1ddce136" type="primary" data-event-opts="{{[['tap',[['pay',['$event']]]]]}}" bindtap="__e">确认并付款</button></view></modal></view>