<view class="container position-relative w-100 h-100 overflow-hidden data-v-aab3f42e"><scroll-view class="coupon-list data-v-aab3f42e" scroll-y="{{true}}"><view class="wrapper data-v-aab3f42e"><block wx:for="{{coupons}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['openDetailModal',['$0',index],[[['coupons','',index]]]]]]]}}" class="coupon data-v-aab3f42e" bindtap="__e"><view class="taobao data-v-aab3f42e"><view class="ticket data-v-aab3f42e" style="{{'border:'+(item.id==coupon_id?'1rpx solid red':'')+';'}}"><view class="left data-v-aab3f42e"><image class="picture data-v-aab3f42e" src="{{item.image}}" mode="aspectFill"></image><view class="introduce data-v-aab3f42e"><view class="top data-v-aab3f42e">￥<text class="big data-v-aab3f42e">{{item.value}}</text><view class="data-v-aab3f42e">{{"满"+item.least+"减"+item.value}}</view></view><view class="type data-v-aab3f42e">{{item.title}}</view><view class="date u-line-1 data-v-aab3f42e">{{item.starttime_text+"-"+item.endtime_text}}</view></view></view><block wx:if="{{activeTabIndex==0}}"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="right data-v-aab3f42e" catchtap="__e"><block wx:if="{{item.id!=coupon_id}}"><view class="use immediate-use data-v-aab3f42e" round="{{true}}" data-event-opts="{{[['tap',[['useCouponWith',['$0'],[[['coupons','',index]]]]]]]}}" bindtap="__e">立即使用</view></block><block wx:else><view class="use immediate-use data-v-aab3f42e" round="{{true}}" data-event-opts="{{[['tap',[['cancelCoupon',['$0'],[[['coupons','',index]]]]]]]}}" bindtap="__e">取消使用</view></block></view></block></view></view></view></block></view></scroll-view><modal vue-id="abc98f86-1" custom="{{true}}" show="{{detailModalVisible}}" width="90%" data-event-opts="{{[['^cancel',[['closeDetailModal']]]]}}" bind:cancel="__e" class="data-v-aab3f42e" bind:__l="__l" vue-slots="{{['default']}}"><view class="modal-content data-v-aab3f42e"><view class="d-flex font-size-extra-lg text-color-base just-content-center mb-20 data-v-aab3f42e">{{coupon.title}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-aab3f42e">{{"有效期："+coupon.starttime_text+"至"+coupon.endtime_text}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-aab3f42e">{{"领取时间："+coupon.createtime_text}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-aab3f42e">{{"卷价值：满"+coupon.least+"减"+coupon.value}}</view><block wx:if="{{coupon.score>0}}"><view class="d-flex font-size-sm text-color-base mb-20 data-v-aab3f42e">{{"需要积分："+coupon.score}}</view></block><view class="d-flex font-size-sm text-color-base mb-20 data-v-aab3f42e">{{"适用范围："+$root.m0}}</view><view class="d-flex font-size-sm text-color-base mb-20 data-v-aab3f42e">{{"适用店铺："+coupon.shop_name}}</view><view class="pre-line font-size-sm text-color-assist mb-30 _pre data-v-aab3f42e" style="max-height:600rpx;overflow:auto;"><jyf-parser vue-id="{{('abc98f86-2')+','+('abc98f86-1')}}" data-ref="couponExplain" class="data-v-aab3f42e vue-ref" bind:__l="__l"></jyf-parser></view><block wx:if="{{activeTabIndex==0}}"><view class="d-flex align-items-center just-content-center data-v-aab3f42e"><button class="use-coupon-btn data-v-aab3f42e" type="primary" data-event-opts="{{[['tap',[['useCoupon',['$event']]]]]}}" bindtap="__e">立即使用</button></view></block></view></modal><u-toast vue-id="abc98f86-3" data-ref="uToast" class="data-v-aab3f42e vue-ref" bind:__l="__l"></u-toast></view>